@using TCC.Views.Shared.Components

@model List<TCC.Models.Transaction>

@{
    ViewData["Title"] = "Index";
    Layout = "_ListTransactionsLayout";
}

<div id="main-content">
    <div class="container-fluid">
        <div class="actions-container" style="display: flex; padding: 10px; justify-content: space-between; align-items: center;">
            <button class="btn btn-fab btn-secondary btn-lg text-white" id="btn-new-expense" data-toggle="modal" data-target="#addTransactionModal" type="button"><span class="icon icon-add"></span></button>
            <span class="current-balance tag tag-simple" style="border: 1px solid; width: 150px; padding: 20px; font-size: 17px" id="current-balance"><a>R$ 2,775.00</a></span>
            <button class="btn btn-fab btn-outline-secondary btn-lg" data-toggle="modal" data-target="#filterTransactionsModal" id="btn-filter" type="button" onclick="filter()">
                <span class="icon icon-content-filter"></span>
            </button>
        </div>

        <!-- New transaction modal -->
        <div class="modal fade" id="addTransactionModal" aria-labelledby="addModalLabel" aria-hidden="true">
        </div>

        <!-- Edit transaction modal -->
        <div class="modal fade" id="editTransactionModal" aria-labelledby="editModalLabel" aria-hidden="true">
        </div>

        <!-- Filter modal -->
        <div class="modal fade" id="filterTransactionsModal" aria-labelledby="filterTransactionsModalLabel" aria-hidden="true">
        </div>

        <div class="card card-block" style="background-color: #2C2C2E;" id="transactionsGrid">
            @await Html.PartialAsync("_Grid.cshtml", Model)
        </div>
    </div>
</div>

<script>
    function edit(type, id) {
        $.ajax({
            type: 'GET',
            url: '/' + type + 's/Edit',
            data: { id: id },
            success: function (result) {
                $("#editTransactionModal").html(result);
                $("#editTransactionModal").modal();
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    }
</script>
<script>
    function exclude(id) {
        $.ajax({
            type: 'DELETE',
            url: '/Transactions/Delete/',
            data: { id: id },
            success: function (result) {
                location.reload();
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    }
</script>
<script>
    function filter() {
        $.ajax({
            type: 'GET',
            url: '/Transactions/Filter',
            success: function (result) {
                $("#filterTransactionsModal").html(result);
                $("#filterTransactionsModal").modal();
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    }
</script>

